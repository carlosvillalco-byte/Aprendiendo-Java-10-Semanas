package servicio;

import modelo.Tarea;
import java.util.ArrayList;

public class GestorTareas {

    private ArrayList<Tarea> tareas;
    private int contadorId;

    public GestorTareas() {
        tareas = new ArrayList<>();
        contadorId = 1;
    }

    // Agregar tarea con ID automático
    public void agregar(String titulo, String descripcion) {
        Tarea tarea = new Tarea(contadorId++, titulo, descripcion);
        tareas.add(tarea);
        System.out.println("Tarea agregada correctamente.");
    }

    // Listar todas
    public void listar() {
        if (tareas.isEmpty()) {
            System.out.println("No hay tareas registradas.");
            return;
        }
        for (Tarea t : tareas) {
            System.out.println(t);
        }
    }

    // Listar pendientes
    public void listarPendientes() {
        boolean hay = false;
        for (Tarea t : tareas) {
            if (!t.isCompletada()) {
                System.out.println(t);
                hay = true;
            }
        }
        if (!hay) {
            System.out.println("No hay tareas pendientes.");
        }
    }

    // Listar completadas
    public void listarCompletadas() {
        boolean hay = false;
        for (Tarea t : tareas) {
            if (t.isCompletada()) {
                System.out.println(t);
                hay = true;
            }
        }
        if (!hay) {
            System.out.println("No hay tareas completadas.");
        }
    }

    // Completar tarea
    public void completar(int id) {
        for (Tarea t : tareas) {
            if (t.getId() == id) {
                t.completar();
                System.out.println("Tarea completada.");
                return;
            }
        }
        System.out.println("ID no encontrado.");
    }

    // Eliminar tarea
    public void eliminar(int id) {
        for (Tarea t : tareas) {
            if (t.getId() == id) {
                tareas.remove(t);
                System.out.println("Tarea eliminada.");
                return;
            }
        }
        System.out.println("No existe una tarea con ese ID.");
    }

    // Estadísticas
    public void estadisticas() {
        int total = tareas.size();
        int completadas = 0;

        for (Tarea t : tareas) {
            if (t.isCompletada()) {
                completadas++;
            }
        }

        int pendientes = total - completadas;

        System.out.println("Total de tareas: " + total);
        System.out.println("Pendientes: " + pendientes);
        System.out.println("Completadas: " + completadas);
    }
